# Directive: 카드뉴스 생성 파이프라인

## 목표
사용자가 입력한 주제 또는 블로그 텍스트를 기반으로, 인스타그램 카드뉴스 HTML을 자동 생성한다.

## 입력
- `text`: 블로그 본문 또는 주제 텍스트
- `slide_count`: 슬라이드 장 수 (기본값: 5, 범위: 3~10)

## 실행 도구 (2단계 파이프라인)
1. **리서치**: `execution/research_topic.py --topic "{text}"`
2. **HTML 생성**: `execution/generate_html_from_text.py --text "{researched_content}" --slides {slide_count}`

## 출력
- 완성된 인스타그램 카드뉴스 HTML (1080×1350px × N슬라이드)

## 품질 기준 (후킹 팀 토론)
생성된 카피는 아래 기준으로 평가한다. **7점 미만이면 재생성**한다.

| 항목 | 기준 | 배점 |
|------|------|------|
| 첫 슬라이드 후킹 | 3초 안에 스크롤을 멈추게 하는가 | 3점 |
| 정보 밀도 | 각 슬라이드가 새로운 가치를 주는가 | 3점 |
| 구조적 완성도 | 끝까지 읽게 만드는 흐름인가 | 2점 |
| 브랜드 일관성 | 전체 톤앤매너가 일관된가 | 2점 |

## 슬라이드 구조 원칙
- **슬라이드 1**: 후킹 타이틀 + 강력한 서브타이틀 (커버)
- **슬라이드 2 ~ N-1**: 핵심 내용 분배 (슬라이드당 1개 주제)
- **슬라이드 N**: 결론 + 핵심 정리 3~5가지

## 디자인 원칙
- 이미지 태그(`<img>`) 절대 사용 금지 → CSS 순수 디자인
- 폰트: Google Fonts Noto Sans KR (한글), Inter (영문)
- 색상: 다크(#0D0D0D) / 화이트(#F8F8F8) / 골드 포인트(#D4AF37)
- 슬라이드 하단: 브랜드명 + 슬라이드 번호 필수

## 엣지 케이스
- **429 에러 (Gemini)**: Ollama 로컬 모델로 자동 전환
- **Ollama 연결 실패**: Gemini API로 폴백, 에러 메시지 출력
- **JSON 파싱 실패**: 응답에서 `{` ~ `}` 재추출 시도
- **슬라이드 수 미달**: 내용을 분석·확장하여 지정 슬라이드 수 충족
